<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">

<style>
#code
{
	position:absolute;
	display:block;
	width:48%;
	left:0px;
	border:1px solid black;
	padding:2px;
	margin:2px;
	top:50px;
	height:90%;
}

#rendu
{
	position:absolute;
	display:block;
	width:48%;
	right:0px;
	border:1px solid black;
	padding:2px;
	margin:2px;
	top:50px;
	height:90%;
	
}

#inputs
{
	text-align:center;
	background-color:lightgrey;
}
</style>

<script src="utils.js">
// définit html(),val(), show(), hide()
</script>

<script src="boucle.js">
// définit oBoucle()
</script>

<script type="text/javascript">
function maj() {
	// TODO : copie le code depuis le textarea "code" vers le div "rendu"
	html('rendu',val('code')); // attention à l'efficacité : on doit récupérer la référence à chaque appel 
}

function majAuto(refCB) {
	oBoucle({
		periode : 2,
		traiter: maj, 
		poursuivre : function(){
			// refCB est dans le scope de cette fonction !
			// return refCB.checked;
			return val(refCB);  
		}
	}); 
}

</script>
</head>
<body>

<div id="inputs">
	<input onclick="maj();" value="actualiser le rendu" type="button">
	<input onclick="majAuto(this);" id="cb" type="checkbox">
	<label for="cb">automatiquement</label>
</div>

<textarea id="code">&lt;h1&gt; Un paragraphe &lt;/h1&gt;
</textarea>

<div id="rendu">
</div>
</body></html>
